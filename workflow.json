{
  "name": "workflow",
  "nodes": [
    {
      "parameters": {
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.chatTrigger",
      "typeVersion": 1.3,
      "position": [
        0,
        0
      ],
      "id": "cf479f67-e241-42cc-90e2-383f2275336b",
      "name": "When chat message received",
      "webhookId": "f8399e3c-172c-4cba-ba54-32d82e726c79"
    },
    {
      "parameters": {
        "options": {
          "systemMessage": "Eres un asistente conversacional experto en atención al cliente.  \nDebes cumplir con las siguientes reglas:  \n\n1. Mantén conversaciones fluidas con los clientes y responde a todas sus preguntas.  \n2. Tu idioma principal de respuesta es vietnamita pero si el cliente te habla en otro idioma responde en el idioma del cliente.  \n3. Basa tus respuestas en la Base de Conocimiento cargada previamente.  \n4. Personaliza tus respuestas según el system prompt y el contexto definido.  \n5. Si detectas una oportunidad de cerrar una venta, proporciona el número de un trabajador para finalizar el proceso.  \n6. Al inicio de la conversación, realiza Lead Collection (nombre, correo, teléfono u otros datos solicitados).  \n7. Ajusta tu tono de comunicación según la configuración establecida (formal, amigable, cercano, etc.).  \n\nResponde siempre de manera clara, útil y orientada al cliente.\n"
        }
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 2.2,
      "position": [
        208,
        0
      ],
      "id": "2406f1aa-c9e0-4620-979c-3a2a6c03b972",
      "name": "AI Agent"
    },
    {
      "parameters": {
        "model": {
          "__rl": true,
          "mode": "list",
          "value": "gpt-4.1-mini"
        },
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "typeVersion": 1.2,
      "position": [
        32,
        224
      ],
      "id": "b1eda67e-c31e-42a8-855f-0802e3dd68ab",
      "name": "OpenAI Chat Model",
      "credentials": {
        "openAiApi": {
          "id": "wldFiBy7rADu0JpC",
          "name": "OpenAi account"
        }
      }
    },
    {
      "parameters": {
        "contextWindowLength": 20
      },
      "type": "@n8n/n8n-nodes-langchain.memoryBufferWindow",
      "typeVersion": 1.3,
      "position": [
        224,
        224
      ],
      "id": "2d19a9bc-fe64-4c12-bc30-fe8213a9f327",
      "name": "Simple Memory"
    }
  ],
  "pinData": {},
  "connections": {
    "When chat message received": {
      "main": [
        [
          {
            "node": "AI Agent",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "OpenAI Chat Model": {
      "ai_languageModel": [
        [
          {
            "node": "AI Agent",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Simple Memory": {
      "ai_memory": [
        [
          {
            "node": "AI Agent",
            "type": "ai_memory",
            "index": 0
          }
        ]
      ]
    },
    "AI Agent": {
      "main": [
        []
      ]
    }
  },
  "active": false,
  "settings": {
    "executionOrder": "v1"
  },
  "versionId": "614e30b7-5db8-4409-8c3e-9dad4bcdcae4",
  "meta": {
    "templateCredsSetupCompleted": true,
    "instanceId": "d50b52912dcc1758aea619cb4dfade5d9b0076692b0b0d3c5b5a7c537d0e452c"
  },
  "id": "mAw3DqvdxTTph0wb",
  "tags": []
}